{"version":3,"sources":["../../src/generators/app/index.js"],"names":["chalk","require","VulcanGenerator","module","exports","_registerArguments","_registerAppNameOption","_registerReactExtensionOption","_registerPackageManagerOption","initializing","_assertIsNotVulcan","inputProps","prompting","_canPrompt","questions","_getAppNameQuestion","_getReactExtensionQuestion","_getPackageManagerQuestion","prompt","then","answers","appName","props","reactExtension","appSubPath","_filterPackageName","packageManager","configuring","_canConfigure","destinationRoot","destinationPath","_dispatch","type","_commitStore","install","_canInstall","log","green","spawnCommandSync","installDependencies","npm","bower","yarn","end","_end","_hasNoErrors"],"mappings":"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","file":"index.js","sourcesContent":["const chalk = require('chalk');\nconst VulcanGenerator = require('../../lib/VulcanGenerator');\n\nmodule.exports = class extends VulcanGenerator {\n  _registerArguments () {\n    this._registerAppNameOption();\n    this._registerReactExtensionOption();\n    this._registerPackageManagerOption();\n  }\n\n  initializing () {\n    this._assertIsNotVulcan();\n    this.inputProps = {};\n  }\n\n  prompting () {\n    if (!this._canPrompt()) { return false; }\n    const questions = [\n      this._getAppNameQuestion(),\n      this._getReactExtensionQuestion(),\n      this._getPackageManagerQuestion(),\n    ];\n\n    return this.prompt(questions).then((answers) => {\n      const appName = this.inputProps.appName || answers.appName;\n      this.props = {\n        appName,\n        reactExtension: (\n          this.inputProps.reactExtension ||\n          answers.reactExtension\n        ),\n        appSubPath: this._filterPackageName(appName),\n        packageManager: this.inputProps.packageManager || answers.packageManager,\n      };\n    });\n  }\n\n  configuring () {\n    if (!this._canConfigure()) { return; }\n    this.destinationRoot(\n      this.destinationPath(this.props.appSubPath)\n    );\n    this._dispatch({\n      type: 'SET_IS_VULCAN_TRUE',\n    });\n    this._dispatch({\n      type: 'SET_APP_NAME',\n      appName: this.props.appName,\n    });\n    this._dispatch({\n      type: 'SET_REACT_EXTENSION',\n      reactExtension: this.props.reactExtension,\n    });\n    this._dispatch({\n      type: 'SET_PACKAGE_MANAGER',\n      packageManager: this.props.packageManager,\n    });\n    this._commitStore();\n  }\n\n  install () {\n    if (!this._canInstall()) { return; }\n    this.log(chalk.green('\\nPulling the most up to date git repository... \\n'));\n    this.spawnCommandSync('git', [\n      'init',\n    ]);\n    this.spawnCommandSync('git', [\n      'remote',\n      'add',\n      'origin',\n      'git@github.com:VulcanJS/Vulcan.git',\n    ]);\n    this.spawnCommandSync('git', [\n      'pull',\n      'origin',\n      'master',\n    ]);\n    this.spawnCommandSync('git', [\n      'remote',\n      'rm',\n      'origin',\n    ]);\n    this.installDependencies({\n      npm: this.props.packageManager === 'npm',\n      bower: false,\n      yarn: this.props.packageManager === 'yarn',\n    });\n  }\n\n  end () {\n    this._end();\n    if (!this._hasNoErrors()) { return; }\n    this.log(' ');\n    this.log(chalk.green('Successfully generated vulcan code base. \\n'));\n    this.log(chalk.green('To run your new app: \\n'));\n    this.log(chalk.green(`  cd ${this.props.appSubPath}`));\n    this.log(chalk.green(`  ${this.props.packageManager} start \\n`));\n  }\n};\n"]}